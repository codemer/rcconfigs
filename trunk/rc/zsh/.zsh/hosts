#!/usr/local/bin/zsh

# keep unique
typeset -U ssh_hosts

# suck in hostnames from known_hosts
if [[ -e $HOME/.ssh/known_hosts ]] ; then
    if [[ -e $HOME/.hosts ]] ; then
        hosts=`cat ~/.hosts`
    fi
    ssh_hosts=($hosts `awk '{print $1}' < $HOME/.ssh/known_hosts | sed "s/,/ /"`)
fi
zstyle ':completion:*:(ssh|scp|ping|traceroute|telnet|rsh|sftp|ftp|lftp):*' hosts $ssh_hosts
